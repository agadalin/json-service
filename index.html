<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="JSON Service : JSON-RPC library for Java" />
    <title>JSON Service - JSON-RPC library for Java</title>
    <!--<link rel="stylesheet" type="text/css" media="screen" href="stylesheets/shCoreRDark.css">
    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/shThemeRDark.css">-->
    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/shCoreEclipse.css">
    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/shThemeEclipse.css">
    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/main.css">
    <script type="text/javascript" src="javascripts/jquery-1.8.0.min.js"></script>
    <script type="text/javascript" src="javascripts/shCore.js"></script>
    <script type="text/javascript" src="javascripts/shBrushJava.js"></script>
    <script type="text/javascript" src="javascripts/shBrushJScript.js"></script>
    <script type="text/javascript" src="javascripts/shBrushXml.js"></script>
    <script type="text/javascript" src="javascripts/main.js"></script>
</head>
<body>

    <!-- header -->
    <div id="header_wrap" class="outer">
        <header class="inner">
            <a id="forkme_banner" href="https://github.com/stefaniuk/json-service">View on GitHub</a>
            <h1 id="project_title">JSON Service</h1>
            <h2 id="project_tagline">JSON-RPC library for Java</h2>
            <section id="downloads">
                <a class="zip_download_link" href="https://github.com/stefaniuk/json-service/zipball/master">Download this project as a .zip file</a>
                <a class="tar_download_link" href="https://github.com/stefaniuk/json-service/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- main content -->
    <div id="main_content_wrap" class="outer">
        <section id="main_content" class="inner">

            <h2>What is JSON-RPC?</h2>
            <p>TODO</p>

            <h2>Overview</h2>
            <p>TODO</p>

            <h2>Features</h2>
            <p>TODO</p>

            <h2>Examples</h2>

            <h3>Usage Example 1: Java Servlet</h3>

            <span class="file-name">CalculatorService.java</span>
            <pre class="brush: java; highlight: [3]">
                public class CalculatorService {

                    @JsonService
                    public Integer add(Integer v1, Integer v2) {

                        return v1 + v2;
                    }

                    @JsonService
                    public Integer subtract(Integer v1, Integer v2) {

                        return v1 - v2;
                    }

                    @JsonService
                    public Integer multiple(Integer v1, Integer v2) {

                        return v1 * v2;
                    }

                    @JsonService
                    public Integer divide(Integer v1, Integer v2) {

                        return v1 / v2;
                    }

                }
            </pre>

            <span class="file-name">JsonRpcController.java</span>
            <pre class="brush: java; highlight: [3,6,15,30]">
                public class JsonRpcController extends HttpServlet {

                    private static JsonServiceRegistry service = new JsonServiceRegistry();

                    static {
                        service.register(CalculatorService.class);
                    }

                    @Override
                    public void doGet(HttpServletRequest request, HttpServletResponse response) {

                        response.setCharacterEncoding("UTF-8");
                        response.setContentType("application/json");

                        service.getServiceMap(CalculatorService.class, response);
                        response.setStatus(200);
                    }

                    @Override
                    public void doPost(HttpServletRequest request, HttpServletResponse response) {

                        String date = (new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss z")).format(Calendar.getInstance().getTime());

                        response.setCharacterEncoding("UTF-8");
                        response.setContentType("application/json");
                        response.setHeader("Expires", "Mon, 01 Jan 2000 00:00:00 GMT");
                        response.setHeader("Last-Modified", date);
                        response.setHeader("Cache-Control", "no-cache");

                        service.handle(request, response, CalculatorService.class);
                        response.setStatus(200);
                    }

                }
            </pre>

            <span class="file-name">web.xml</span>
            <pre class="brush: xml">
                &lt;servlet&gt;
                    &lt;display-name&gt;servlet&lt;/display-name&gt;
                    &lt;servlet-name&gt;servlet&lt;/servlet-name&gt;
                    &lt;servlet-class&gt;org.stefaniuk.json.service.example1.JsonRpcController&lt;/servlet-class&gt;
                &lt;/servlet&gt;

                &lt;servlet-mapping&gt;
                    &lt;servlet-name&gt;servlet&lt;/servlet-name&gt;
                    &lt;url-pattern&gt;/jsonrpc&lt;/url-pattern&gt;
                &lt;/servlet-mapping&gt;
            </pre>

            <span class="file-name">index.jsp</span>
            <pre class="brush: javascript; highlight: [9]">
                require([
                    'dojo/ready',
                    'dojox/rpc/Service',
                    'dojox/rpc/JsonRPC' // JsonRPC has to be loaded too
                ], function(ready, Service) {
                    ready(function() {

                        // create JSON-RPC service
                        service = new Service('jsonrpc');

                        // call JSON-RPC methods
                        service.add(12345, 54321).then(function(result) {
                            console.log('(add)', result);
                        });
                        service.subtract(12345, 54321).then(function(result) {
                            console.log('(subtract)', result);
                        });
                        service.multiple(12345, 54321).then(function(result) {
                            console.log('(multiple)', result);
                        });
                        service.divide(12345, 54321).then(function(result) {
                            console.log('(divide)', result);
                        });

                    });

                });
            </pre>

            <h3>Usage Example 2: Simple Spring Framework integration</h3>

            <span class="file-name">CalculatorService.java</span>
            <pre class="brush: java">
                public class CalculatorService {

                    @JsonService
                    public Integer add(Integer v1, Integer v2) {

                        return v1 + v2;
                    }

                    @JsonService
                    public Integer subtract(Integer v1, Integer v2) {

                        return v1 - v2;
                    }

                    @JsonService
                    public Integer multiple(Integer v1, Integer v2) {

                        return v1 * v2;
                    }

                    @JsonService
                    public Integer divide(Integer v1, Integer v2) {

                        return v1 / v2;
                    }

                }
            </pre>

            <span class="file-name">JsonRpcController.java</span>
            <pre class="brush: java highlight: [11]">
                @Controller
                @RequestMapping(value = &quot;/jsonrpc/*&quot;)
                public class JsonRpcController {

                    @Autowired
                    private JsonServiceRegistry jsonService;

                    @RequestMapping(value = &quot;*&quot;)
                    public ResponseEntity&lt;String&gt; service(HttpServletRequest request, HttpServletResponse response) throws Exception {

                        return JsonServiceUtil.handle(jsonService, request, response, CalculatorService.class);
                    }

                }
            </pre>

            <span class="file-name">service.xml</span>
            <pre class="brush: xml highlight: [8]">
                &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
                &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
                    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
                    xsi:schemaLocation=&quot;
                        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd&quot;&gt;

                    &lt;!-- JSON Service (JSON-RPC) --&gt;
                    &lt;bean id=&quot;jsonService&quot; class=&quot;org.stefaniuk.json.service.JsonServiceRegistry&quot;&gt;
                        &lt;property name=&quot;registry&quot;&gt;
                            &lt;list&gt;
                                &lt;value&gt;org.stefaniuk.json.service.example2.CalculatorService&lt;/value&gt;
                            &lt;/list&gt;
                        &lt;/property&gt;
                    &lt;/bean&gt;

                &lt;/beans&gt;
            </pre>

            <span class="file-name">index.jsp</span>
            <pre class="brush: javascript">
                require([
                    'dojo/ready',
                    'dojox/rpc/Service',
                    'dojox/rpc/JsonRPC' // JsonRPC has to be loaded too
                ], function(ready, Service) {
                    ready(function() {

                        // create JSON-RPC service
                        service = new Service('controller/jsonrpc/');

                        // call JSON-RPC methods
                        service.add(12345, 54321).then(function(result) {
                            console.log('(add)', result);
                        });
                        service.subtract(12345, 54321).then(function(result) {
                            console.log('(subtract)', result);
                        });
                        service.multiple(12345, 54321).then(function(result) {
                            console.log('(multiple)', result);
                        });
                        service.divide(12345, 54321).then(function(result) {
                            console.log('(divide)', result);
                        });

                    });

                });
            </pre>

            <h3>Usage Example 3: Advanced Spring Framework integration</h3>
            <p>TODO</p>

            <h2>Download</h2>

            <a href="https://github.com/stefaniuk/json-service/raw/master/build/json-service-1.1.0.jar">json-service-1.1.0.jar</a>
            <br />
            <a href="https://github.com/stefaniuk/json-service/raw/master/build/json-service-1.1.0-sources.jar">json-service-1.1.0-sources.jar</a>
            <br />
            <a href="https://github.com/stefaniuk/json-service/raw/master/build/json-service-1.1.0-javadoc.jar">json-service-1.1.0-javadoc.jar</a>
            <br />
            <a href="https://github.com/stefaniuk/json-service/raw/master/build/json-service-example1.war">json-service-example1.war</a>
            <br />
            <a href="https://github.com/stefaniuk/json-service/raw/master/build/json-service-example2.war">json-service-example2.war</a>
            <br />
            <a href="https://github.com/stefaniuk/json-service/raw/master/build/json-service-example3.war">json-service-example3.war</a>

        </section>
    </div>

    <!-- footer -->
    <div id="footer_wrap" class="outer">
        <footer class="inner">
            <p class="copyright">JSON Service maintained by <a href="https://github.com/stefaniuk">stefaniuk</a></p>
            <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
        </footer>
    </div>

    <!-- SyntaxHighlighter -->
    <script type="text/javascript">
        SyntaxHighlighter.all();
    </script>

</body>
</html>
